\documentclass[supercite,notofont,hustthesis]{HustGraduPaper}

\title{面向松散RISC-V多核的片外访存架构设计与实现}
\author{刘一鸣}
\school{计算机科学与技术}
\classnum{ZY1801}
\stunum{U201814489}
\instructor{邵志远}
\date{2022年6月1日}

\usepackage{algorithm}
\usepackage{enumitem}
\usepackage{amsmath}
\usepackage{subcaption}
\usepackage{svg}
\usepackage{graphicx}
\usepackage{xurl}

\newcommand{\csvgfig}[3]{
  \begin{figure}[htb]
    \center
    \includesvg[width=#3\columnwidth]{images/#1.svg}
    \caption{#2}
    \label{fig:#1}
  \end{figure}
}

\graphicspath{ {./images/} }

\newcommand{\cpngfig}[3]{
  \begin{figure}[htb]
    \center
    \includegraphics[width=#3\columnwidth]{#1}
    \caption{#2}
    \label{fig:#1}
  \end{figure}
}

\begin{document}

\maketitle

\statement

\clearpage

\pagenumbering{Roman}

\begin{cnabstract}{第五代精简指令集架构；多核架构；存储一致性；访存架构；智能网卡；现场可编程逻辑门阵列}

智能网卡是计算机网络与体系结构领域近年来出现的新兴概念。根据用户实际的项目需要，智能网卡允许用户
通过可编程的方式将网络计算工作卸载到智能网卡上。在这其中，基于片上系统的智能网卡是发展的一大重要
方向。基于片上系统的智能网卡集成了网络处理器，由网络处理器通过访存操作获取网络数据通路上的报文，
并进行处理。因此，访存架构在设计中扮演了重要的角色。但是传统的计算机访存架构所采用的存储一致性
模型无法有效地利用网络报文彼此之间相互独立的数据特点，所以在实现中带来了额外的性能开销。

本课题向智能网卡片上系统的设计引入了基于松散存储一致性模型的访存架构设计。通过松散存储一致性模型
较弱的一致性约束，降低多个网络处理器之间因存储一致性约束而受到的性能限制。基于第五代精简指令集架构，
以及多个开源项目，本课题将实现基于松散多核访存架构的智能网卡片上系统搭建，并对所搭建的片上系统进行
仿真测试与基于现场可编程逻辑门阵列的上板验证。

本课题实现了内存架构中的缓存系统搭建，并部分完成了智能网卡片上系统的搭建工作。通过软件仿真与上板
验证，本课题验证了现有实现的正确性。测试所得到的数据指出，本课题所实现的缓存架构能有效地提升处理器核
在访存架构中的性能表现。尽管如此，上板测试显示目前的片上系统实现在性能上仍然存在不足，尚有较大的
优化空间。

\end{cnabstract}

\begin{enabstract}{RISC-V, Many Cores, Memory Consistency, Memory System, SmartNIC, FPGA}

SmartNIC is an emerging concept and a trend of research in computer network and
architecture fields. It allows users to practically offload network computing
tasks through a programmable approach. Among the existing work,
System-on-Chip-based (SoC-based) SmartNIC plays an important role. Network
Processors (NP) are integrated into SoC-based SmartNICs, access and handle
on-path network packets by memory accessing operations. Thus, memory system
turns to be a key component of SoC-based SmartNIC designs. However, the memory
consistency model in traditional computer architectures cannot make efficient
use of the data trait of being independent between two different network
packets, which brings unnecessary performance cost.

In this paper, we introduce a memory system using Relaxed Memory Order (RMO)
model to SmartNIC SoC design. By implementing the RMO memory consistency model,
the architecture aims to cutting down the cost of keeping strict memory
consistency in traditional memory systems. Based on RISC-V Instruction Set
Architecture (ISA) and many open source projects, this paper builds a SoC-based
SmartNIC using RMO model. Simulator-based and FPGA-based tests are performed for
verification purposes.

This paper demonstrates the building of cache system, and partly the SoC-based
SmartNIC. By both simulator- and FPGA-based tests, we give a proper verification
of our implementation. The cache system given in this paper significantly
improves the performance of processors in the memory system. However, a
FPGA-based test has shown poor-functioning in current SoC design, indicating a
large space for improvement.

\end{enabstract}

\tableofcontents[level=2]

\clearpage

\pagenumbering{arabic}

\input{chapter/introduction.tex}
\input{chapter/principle.tex}
\input{chapter/design.tex}
\input{chapter/implementation.tex}
\input{chapter/verification.tex}
\input{chapter/conclusion.tex}

\begin{thankpage}

我首先要对我的指导老师邵志远教授表示衷心的感谢，邵老师在整个毕业设计完成期间提供了诸多的指导意见
与帮助，让我颇为受用。

我要对实验室里的各位学长学姐表示诚挚的感谢。感谢朱志成、霍振飞两位学长在毕设课题完成期间提供的诸多
帮助与指导。同时还要感谢吴敏康、陈佳杰、黄硕、肖靖宇、李可欣和李若时六位学长学姐的相关帮助。

同时，我要感谢来自于开源社区多位开发者的热情帮助，他们为课题完成期间所遇到的各类技术问题作出了详尽的
解答。

然后，我要对我的家人表示感谢。他们在过去的时间里无私地养育了我，把我培养成了一个健全的人。

我还要感谢我长期以来的朋友陆思彤、车春池、何叔恒、刘攀、杨君毅、禹露、陈锦等人，在短暂的人生之中，
我与他们建立了值得纪念的友谊。

此外，我还要感谢计卓1801班的李志高、梁昌洵、陈柏余、金明明等全体班干部成员。感谢他们在本科四年
期间为无私地为班级所作出的贡献。

最后，我要感谢我的母校华中科技大学。学校在这四年来为我们广大学子提供了悉心的教导。正是因为学校所
提供的优秀平台，我才能够有机会在自己所感兴趣的领域内更进一步。

\end{thankpage}

\bibliography{main}

\end{document}
